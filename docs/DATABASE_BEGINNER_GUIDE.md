# üéì PostgreSQL –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö - –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–ß—Ç–æ —Ç–∞–∫–æ–µ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö](#—á—Ç–æ-—Ç–∞–∫–æ–µ-–±–∞–∑–∞-–¥–∞–Ω–Ω—ã—Ö)
2. [–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î](#–∫–∞–∫-–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è-–∫-–±–¥)
3. [–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã PostgreSQL](#–æ—Å–Ω–æ–≤–Ω—ã–µ-–∫–æ–º–∞–Ω–¥—ã-postgresql)
4. [SQL-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞](#sql-–∑–∞–ø—Ä–æ—Å—ã-–¥–ª—è-–ø—Ä–æ–µ–∫—Ç–∞)
5. [GUI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã)](#gui-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã)
6. [–ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã](#–ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ-–ø—Ä–∏–º–µ—Ä—ã)
7. [–ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è](#—á–∞—Å—Ç—ã–µ-–æ—à–∏–±–∫–∏)

---

## üóÑÔ∏è –ß—Ç–æ —Ç–∞–∫–æ–µ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö?

### –ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏:

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ë–î)** - —ç—Ç–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –ø–æ—Ö–æ–∂–µ–µ –Ω–∞ Excel-—Ç–∞–±–ª–∏—Ü—É, –Ω–æ –Ω–∞–º–Ω–æ–≥–æ –º–æ—â–Ω–µ–µ –∏ –±—ã—Å—Ç—Ä–µ–µ.

**PostgreSQL** - —ç—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ (—Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ë–î), –∫–æ—Ç–æ—Ä–∞—è:
- –•—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö (–∫–∞–∫ –ª–∏—Å—Ç—ã –≤ Excel)
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –±—ã—Å—Ç—Ä–æ –∏—Å–∫–∞—Ç—å –∏ –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ
- –ó–∞—â–∏—â–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç –ø–æ—Ç–µ—Ä—å
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–º–Ω–æ–≥–æ –±—ã—Å—Ç—Ä–µ–µ –æ–±—ã—á–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

### –í –≤–∞—à–µ–º –ø—Ä–æ–µ–∫—Ç–µ AI News Assistant:

```
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö: ai_news_assistant
‚îÇ
‚îú‚îÄ‚îÄ –¢–∞–±–ª–∏—Ü–∞: digest_sessions     ‚Üê —Å–µ—Å—Å–∏–∏ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤ (–Ω–∞—à–∞ –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞!)
‚îÇ   ‚îú‚îÄ‚îÄ id                       ‚Üê —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä —Å–µ—Å—Å–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ chat_id                  ‚Üê ID —á–∞—Ç–∞ Telegram
‚îÇ   ‚îú‚îÄ‚îÄ message_ids              ‚Üê ID —Å–æ–æ–±—â–µ–Ω–∏–π (JSON)
‚îÇ   ‚îú‚îÄ‚îÄ news_count               ‚Üê –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤–æ—Å—Ç–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ is_active                ‚Üê –∞–∫—Ç–∏–≤–Ω–∞ –ª–∏ —Å–µ—Å—Å–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ created_at               ‚Üê –∫–æ–≥–¥–∞ —Å–æ–∑–¥–∞–Ω–∞
‚îÇ   ‚îî‚îÄ‚îÄ updated_at               ‚Üê –∫–æ–≥–¥–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∞
‚îÇ
‚îú‚îÄ‚îÄ –¢–∞–±–ª–∏—Ü–∞: news                ‚Üê –Ω–æ–≤–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ –¢–∞–±–ª–∏—Ü–∞: bot_sessions        ‚Üê –¥—Ä—É–≥–∏–µ —Å–µ—Å—Å–∏–∏ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ –¢–∞–±–ª–∏—Ü–∞: sources             ‚Üê –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π
‚îî‚îÄ‚îÄ –¢–∞–±–ª–∏—Ü–∞: experts             ‚Üê —ç–∫—Å–ø–µ—Ä—Ç—ã
```

---

## üîå –ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ë–î

### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª (–∫–æ–º–∞–Ω–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)

#### –®–∞–≥ 1: –û—Ç–∫—Ä—ã—Ç—å —Ç–µ—Ä–º–∏–Ω–∞–ª –Ω–∞ macOS

1. –ù–∞–∂–º–∏—Ç–µ `Cmd + –ü—Ä–æ–±–µ–ª` (–æ—Ç–∫—Ä–æ–µ—Ç—Å—è Spotlight)
2. –ù–∞–ø–∏—à–∏—Ç–µ "Terminal"
3. –ù–∞–∂–º–∏—Ç–µ Enter

#### –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –≤—Å—Ç–∞–≤—å—Ç–µ —ç—Ç—É –∫–æ–º–∞–Ω–¥—É:

```bash
psql -h localhost -U postgres -d ai_news_db
```

**–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã –ø–æ —Å–ª–æ–≤–∞–º:**

| –ß–∞—Å—Ç—å | –ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç | –û–±—ä—è—Å–Ω–µ–Ω–∏–µ |
|-------|--------------|------------|
| `psql` | –ü—Ä–æ–≥—Ä–∞–º–º–∞ PostgreSQL Client | –≠—Ç–æ "–∫–ª–∏–µ–Ω—Ç" –¥–ª—è –æ–±—â–µ–Ω–∏—è —Å –ë–î |
| `-h localhost` | Host = localhost | –ê–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ –ë–î. `localhost` = –≤–∞—à –∫–æ–º–ø—å—é—Ç–µ—Ä |
| `-U postgres` | User = postgres | –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î. `postgres` - —ç—Ç–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä |
| `-d ai_news_db` | Database = ai_news_db | –ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö |

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**

```
Password for user postgres: 
```

–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –æ—Ç PostgreSQL (–∫–æ—Ç–æ—Ä—ã–π –≤—ã —É–∫–∞–∑—ã–≤–∞–ª–∏ –≤ `.env` —Ñ–∞–π–ª–µ) –∏ –Ω–∞–∂–º–∏—Ç–µ Enter.

‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ü–∞—Ä–æ–ª—å –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –≤–≤–æ–¥–µ - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏!

**–£—Å–ø–µ—à–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:**

```
psql (12.10)
Type "help" for help.

ai_news_db=# 
```

–ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ `ai_news_db=#` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã **–≤–Ω—É—Ç—Ä–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** –∏ –≥–æ—Ç–æ–≤—ã –≤–≤–æ–¥–∏—Ç—å –∫–æ–º–∞–Ω–¥—ã! üéâ

#### –®–∞–≥ 3: –ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—ã –ø–æ–¥–∫–ª—é—á–µ–Ω—ã –∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ë–î:

```sql
SELECT current_database();
```

**–í—ã–≤–æ–¥:**
```
 current_database 
------------------
 ai_news_db
(1 row)
```

–û—Ç–ª–∏—á–Ω–æ! –í—ã –≤–Ω—É—Ç—Ä–∏ –±–∞–∑—ã `ai_news_db`.

---

## üìù –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã PostgreSQL

### –î–≤–∞ —Ç–∏–ø–∞ –∫–æ–º–∞–Ω–¥:

#### üîπ –¢–∏–ø 1: –ú–µ—Ç–∞–∫–æ–º–∞–Ω–¥—ã (–Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å `\`)
–≠—Ç–æ –∫–æ–º–∞–Ω–¥—ã **–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è** psql, –∞ –Ω–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏.

#### üîπ –¢–∏–ø 2: SQL-–∑–∞–ø—Ä–æ—Å—ã (–∑–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –Ω–∞ `;`)
–≠—Ç–æ –∫–æ–º–∞–Ω–¥—ã **–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏** –≤ —Ç–∞–±–ª–∏—Ü–∞—Ö.

---

### üéØ –ú–µ—Ç–∞–∫–æ–º–∞–Ω–¥—ã –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

```sql
-- –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î
\dt

-- –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã
\d digest_sessions

-- –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
\l

-- –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ë–î
\du

-- –ü–æ–º–æ—â—å –ø–æ –≤—Å–µ–º –∫–æ–º–∞–Ω–¥–∞–º
\?

-- –ü–æ–º–æ—â—å –ø–æ SQL-–∫–æ–º–∞–Ω–¥–∞–º
\h

-- –í—ã—Ö–æ–¥ –∏–∑ psql
\q
```

#### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:

**1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã:**

```sql
ai_news_db=# \dt
```

**–í—ã–≤–æ–¥:**
```
                List of relations
 Schema |        Name        | Type  |  Owner   
--------+--------------------+-------+----------
 public | bot_sessions       | table | postgres
 public | comments           | table | postgres
 public | curators           | table | postgres
 public | digest_sessions    | table | postgres  ‚Üê –ù–∞—à–∞ –Ω–æ–≤–∞—è —Ç–∞–±–ª–∏—Ü–∞!
 public | experts            | table | postgres
 public | news               | table | postgres
 public | sources            | table | postgres
(7 rows)
```

**2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã digest_sessions:**

```sql
ai_news_db=# \d digest_sessions
```

**–í—ã–≤–æ–¥:**
```
                                     Table "public.digest_sessions"
    Column     |           Type              | Nullable |                  Default                   
---------------+-----------------------------+----------+--------------------------------------------
 id            | integer                     | not null | nextval('digest_sessions_id_seq')
 chat_id       | character varying           | not null | 
 message_ids   | text                        | not null | 
 news_count    | integer                     | not null | 
 created_at    | timestamp without time zone |          | now()
 updated_at    | timestamp without time zone |          | now()
 is_active     | boolean                     |          | true
```

**–ß—Ç–æ –æ–∑–Ω–∞—á–∞—é—Ç –∫–æ–ª–æ–Ω–∫–∏:**
- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä –∑–∞–ø–∏—Å–∏ (1, 2, 3...)
- `chat_id` - ID —á–∞—Ç–∞ Telegram (—Å—Ç—Ä–æ–∫–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä "-1002983482030")
- `message_ids` - —Å–ø–∏—Å–æ–∫ ID —Å–æ–æ–±—â–µ–Ω–∏–π –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- `news_count` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≤–æ—Å—Ç–µ–π (—Ü–µ–ª–æ–µ —á–∏—Å–ª–æ)
- `is_active` - –∞–∫—Ç–∏–≤–Ω–∞ –ª–∏ —Å–µ—Å—Å–∏—è (true/false)
- `created_at` - –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` - –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

---

## üîç SQL-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏

### –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ SQL-–∑–∞–ø—Ä–æ—Å–∞:

```sql
SELECT [—á—Ç–æ –≤—ã–±—Ä–∞—Ç—å] FROM [–æ—Ç–∫—É–¥–∞] WHERE [—É—Å–ª–æ–≤–∏–µ];
```

### 4 –≥–ª–∞–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã SQL (CRUD):

| –ö–æ–º–∞–Ω–¥–∞ | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –ê–Ω–∞–ª–æ–≥–∏—è |
|---------|------------|----------|
| `SELECT` | –ß–∏—Ç–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ | –ö–∞–∫ "–æ—Ç–∫—Ä—ã—Ç—å –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–∞–±–ª–∏—Ü—É" |
| `INSERT` | –î–æ–±–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ | –ö–∞–∫ "–¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–æ–∫—É" |
| `UPDATE` | –ò–∑–º–µ–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ | –ö–∞–∫ "–æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —è—á–µ–π–∫—É" |
| `DELETE` | –£–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ | –ö–∞–∫ "—É–¥–∞–ª–∏—Ç—å —Å—Ç—Ä–æ–∫—É" |

---

## üéØ SQL-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –≤–∞—à–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### 1Ô∏è‚É£ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –í–°–ï —Å–µ—Å—Å–∏–∏ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤

```sql
SELECT * FROM digest_sessions;
```

**–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:**
- `SELECT *` - –≤—ã–±—Ä–∞—Ç—å –í–°–ï –∫–æ–ª–æ–Ω–∫–∏ (–∑–≤–µ–∑–¥–æ—á–∫–∞ `*` = –≤—Å—ë)
- `FROM digest_sessions` - –∏–∑ —Ç–∞–±–ª–∏—Ü—ã digest_sessions
- `;` - **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è** —Ç–æ—á–∫–∞ —Å –∑–∞–ø—è—Ç–æ–π –≤ –∫–æ–Ω—Ü–µ –∫–æ–º–∞–Ω–¥—ã

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
 id |     chat_id      |      message_ids       | news_count | is_active |      created_at         |      updated_at      
----+------------------+------------------------+------------+-----------+-------------------------+----------------------
  1 | -1002983482030   | [237, 238, 239, 240]   |         21 | t         | 2025-10-01 09:00:00.123 | 2025-10-01 09:00:00
  2 | -1002983482030   | [250, 251, 252]        |         15 | f         | 2025-10-01 10:30:00.456 | 2025-10-01 11:00:00
(2 rows)
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞:**
- –í –ë–î –µ—Å—Ç—å 2 –∑–∞–ø–∏—Å–∏ (2 rows)
- –ü–µ—Ä–≤–∞—è —Å–µ—Å—Å–∏—è (id=1): –∞–∫—Ç–∏–≤–Ω–∞—è (`is_active = t`, –≥–¥–µ t = true)
- –í—Ç–æ—Ä–∞—è —Å–µ—Å—Å–∏—è (id=2): –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞—è (`is_active = f`, –≥–¥–µ f = false)
- –í –ø–µ—Ä–≤–æ–π —Å–µ—Å—Å–∏–∏ 21 –Ω–æ–≤–æ—Å—Ç—å, –≤–æ –≤—Ç–æ—Ä–æ–π 15

### 2Ô∏è‚É£ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–ª—å–∫–æ –ê–ö–¢–ò–í–ù–´–ï —Å–µ—Å—Å–∏–∏

```sql
SELECT * FROM digest_sessions WHERE is_active = true;
```

**–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:**
- `WHERE is_active = true` - –¥–æ–±–∞–≤–∏–ª–∏ —É—Å–ª–æ–≤–∏–µ "—Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ"
- `WHERE` –≤ SQL –æ–∑–Ω–∞—á–∞–µ—Ç "–≥–¥–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É—Å–ª–æ–≤–∏–µ"

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
 id |     chat_id      |      message_ids       | news_count | is_active |      created_at      
----+------------------+------------------------+------------+-----------+----------------------
  1 | -1002983482030   | [237, 238, 239, 240]   |         21 | t         | 2025-10-01 09:00:00
(1 row)
```

–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∑–∞–ø–∏—Å—å - —Ç–∞, –≥–¥–µ `is_active = true`.

### 3Ô∏è‚É£ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–µ—Å—Å–∏–π (—Å–∞–º—ã–µ –Ω–æ–≤—ã–µ)

```sql
SELECT * FROM digest_sessions 
ORDER BY created_at DESC 
LIMIT 5;
```

**–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:**
- `ORDER BY created_at DESC` - –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ –¥–∞—Ç–µ —Å–æ–∑–¥–∞–Ω–∏—è
  - `ORDER BY` = "—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ"
  - `DESC` = descending (–ø–æ —É–±—ã–≤–∞–Ω–∏—é, –æ—Ç –Ω–æ–≤—ã—Ö –∫ —Å—Ç–∞—Ä—ã–º)
  - –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–∞–æ–±–æ—Ä–æ—Ç: `ASC` = ascending (–ø–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–Ω–∏—é, –æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫ –Ω–æ–≤—ã–º)
- `LIMIT 5` - –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ 5 –∑–∞–ø–∏—Å–µ–π

### 4Ô∏è‚É£ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏

```sql
SELECT chat_id, news_count, is_active, created_at 
FROM digest_sessions 
WHERE is_active = true;
```

**–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:**
- –í–º–µ—Å—Ç–æ `*` (–≤—Å—ë) –ø–µ—Ä–µ—á–∏—Å–ª–∏–ª–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –∫–æ–ª–æ–Ω–∫–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
- –í—ã–≤–æ–¥ –±—É–¥–µ—Ç –∫–æ–º–ø–∞–∫—Ç–Ω–µ–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
     chat_id      | news_count | is_active |      created_at      
------------------+------------+-----------+----------------------
 -1002983482030   |         21 | t         | 2025-10-01 09:00:00
(1 row)
```

### 5Ô∏è‚É£ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–µ—Å—Å–∏—é –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —á–∞—Ç–∞

```sql
SELECT * FROM digest_sessions 
WHERE chat_id = '-1002983482030';
```

**–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:**
- `WHERE chat_id = '-1002983482030'` - —É—Å–ª–æ–≤–∏–µ "–≥–¥–µ chat_id —Ä–∞–≤–µ–Ω —ç—Ç–æ–º—É –∑–Ω–∞—á–µ–Ω–∏—é"
- –û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ **–æ–¥–∏–Ω–∞—Ä–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏** `'...'` –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

### 6Ô∏è‚É£ –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Å—Å–∏–π

```sql
-- –í—Å–µ–≥–æ —Å–µ—Å—Å–∏–π
SELECT COUNT(*) FROM digest_sessions;

-- –ê–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π
SELECT COUNT(*) FROM digest_sessions WHERE is_active = true;

-- –ù–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π
SELECT COUNT(*) FROM digest_sessions WHERE is_active = false;
```

**–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:**
- `COUNT(*)` - –ø–æ–¥—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫
- `--` –≤ –Ω–∞—á–∞–ª–µ —Å—Ç—Ä–æ–∫–∏ = –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è)

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
 count 
-------
     5
(1 row)
```

### 7Ô∏è‚É£ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å–µ—Å—Å–∏—è–º (–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞)

```sql
SELECT 
    is_active,
    COUNT(*) as –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ,
    MAX(created_at) as –ø–æ—Å–ª–µ–¥–Ω–µ–µ_–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
FROM digest_sessions
GROUP BY is_active;
```

**–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:**
- `COUNT(*) as –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ` - –ø–æ–¥—Å—á–∏—Ç–∞—Ç—å –∏ –Ω–∞–∑–≤–∞—Ç—å –∫–æ–ª–æ–Ω–∫—É "–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ"
- `MAX(created_at)` - –Ω–∞–π—Ç–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ (—Å–∞–º–æ–µ –Ω–æ–≤–æ–µ) –∑–Ω–∞—á–µ–Ω–∏–µ –¥–∞—Ç—ã
- `GROUP BY is_active` - —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞—Ç—å –ø–æ —Å—Ç–∞—Ç—É—Å—É (true/false)
- `as` = "–Ω–∞–∑–≤–∞—Ç—å –∫–∞–∫" (–∑–∞–¥–∞—Ç—å –ø—Å–µ–≤–¥–æ–Ω–∏–º –∫–æ–ª–æ–Ω–∫–µ)

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
 is_active | –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ | –ø–æ—Å–ª–µ–¥–Ω–µ–µ_–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ 
-----------+------------+----------------------
 t         |          3 | 2025-10-01 14:00:00
 f         |          7 | 2025-10-01 12:00:00
(2 rows)
```

**–û–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
- 3 –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–∏ (is_active = t)
- 7 –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–µ—Å—Å–∏–π (is_active = f)
- –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–∞—è —Å–µ—Å—Å–∏—è —Å–æ–∑–¥–∞–Ω–∞ –≤ 14:00

### 8Ô∏è‚É£ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–µ—Å—Å–∏–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞

```sql
SELECT * FROM digest_sessions 
WHERE created_at > NOW() - INTERVAL '24 hours'
ORDER BY created_at DESC;
```

**–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:**
- `NOW()` - —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è
- `INTERVAL '24 hours'` - –∏–Ω—Ç–µ—Ä–≤–∞–ª –≤ 24 —á–∞—Å–∞
- `NOW() - INTERVAL '24 hours'` = "24 —á–∞—Å–∞ –Ω–∞–∑–∞–¥ –æ—Ç —Ç–µ–∫—É—â–µ–≥–æ –º–æ–º–µ–Ω—Ç–∞"
- `>` = "–±–æ–ª—å—à–µ —á–µ–º" (—Ç–æ –µ—Å—Ç—å –Ω–æ–≤–µ–µ —á–µ–º)

### 9Ô∏è‚É£ –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ä—ã–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ (–¥–ª—è –æ—á–∏—Å—Ç–∫–∏)

```sql
SELECT * FROM digest_sessions 
WHERE is_active = false 
AND updated_at < NOW() - INTERVAL '7 days';
```

**–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:**
- `AND` - –ª–æ–≥–∏—á–µ—Å–∫–æ–µ "–ò" (–æ–±–∞ —É—Å–ª–æ–≤–∏—è –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è)
- –ò—â–µ–º —Å–µ—Å—Å–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ:
  1. –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–µ (`is_active = false`)
  2. –ò (`AND`) –æ–±–Ω–æ–≤–ª–µ–Ω—ã –±–æ–ª–µ–µ 7 –¥–Ω–µ–π –Ω–∞–∑–∞–¥

### üîü –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –∫—Ä–∞—Å–∏–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

```sql
SELECT 
    id,
    chat_id,
    news_count,
    CASE 
        WHEN is_active THEN '–ê–∫—Ç–∏–≤–Ω–∞'
        ELSE '–ó–∞–≤–µ—Ä—à–µ–Ω–∞'
    END as —Å—Ç–∞—Ç—É—Å,
    TO_CHAR(created_at, 'DD.MM.YYYY HH24:MI') as —Å–æ–∑–¥–∞–Ω–∞
FROM digest_sessions
ORDER BY created_at DESC
LIMIT 10;
```

**–†–∞–∑–±–æ—Ä –∫–æ–º–∞–Ω–¥—ã:**
- `CASE WHEN ... THEN ... ELSE ... END` - —É—Å–ª–æ–≤–∏–µ (–∫–∞–∫ if/else –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏)
- –ü–µ—Ä–µ–≤–æ–¥–∏–º `true`/`false` –≤ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–ª–æ–≤–∞ "–ê–∫—Ç–∏–≤–Ω–∞"/"–ó–∞–≤–µ—Ä—à–µ–Ω–∞"
- `TO_CHAR()` - —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç—ã
- `'DD.MM.YYYY HH24:MI'` - —Ñ–æ—Ä–º–∞—Ç –¥–∞—Ç—ã (–¥–µ–Ω—å.–º–µ—Å—è—Ü.–≥–æ–¥ —á–∞—Å:–º–∏–Ω—É—Ç—ã)

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
 id |     chat_id      | news_count |   —Å—Ç–∞—Ç—É—Å   |     —Å–æ–∑–¥–∞–Ω–∞      
----+------------------+------------+------------+------------------
  5 | -1002983482030   |         18 | –ê–∫—Ç–∏–≤–Ω–∞    | 01.10.2025 14:30
  4 | -1002983482030   |         21 | –ó–∞–≤–µ—Ä—à–µ–Ω–∞  | 01.10.2025 10:00
  3 | -1002983482030   |         15 | –ó–∞–≤–µ—Ä—à–µ–Ω–∞  | 30.09.2025 09:00
```

---

## üé® –°–ø–æ—Å–æ–± 2: GUI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã)

–î–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö **–Ω–∞–º–Ω–æ–≥–æ –ø—Ä–æ—â–µ** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤–º–µ—Å—Ç–æ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞!

### üî• –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã:

#### 1. **DBeaver** (–õ—É—á—à–∏–π –≤—ã–±–æ—Ä –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö!)

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–∞ macOS:**
```bash
brew install --cask dbeaver-community
```

**–ö–∞–∫ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è:**

1. –û—Ç–∫—Ä—ã—Ç—å DBeaver
2. –ù–∞–∂–∞—Ç—å "Database" ‚Üí "New Database Connection"
3. –í—ã–±—Ä–∞—Ç—å "PostgreSQL"
4. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª—è:
   - **Host**: `localhost`
   - **Port**: `5432`
   - **Database**: `ai_news_db`
   - **Username**: `postgres`
   - **Password**: [–≤–∞—à –ø–∞—Ä–æ–ª—å –∏–∑ .env]
5. –ù–∞–∂–∞—Ç—å "Test Connection" (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ)
6. –ï—Å–ª–∏ –≤—Å—ë –û–ö - –Ω–∞–∂–∞—Ç—å "Finish"

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ DBeaver:**
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π –∏ –æ—Ç–∫—Ä—ã—Ç—ã–π
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –∏ –ø–æ–Ω—è—Ç–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ –≤–∏–¥–µ —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä—è–º–æ –≤ —Ç–∞–±–ª–∏—Ü–µ
- ‚úÖ **–ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è!**

**–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å DBeaver:**

1. –í –ª–µ–≤–æ–π –ø–∞–Ω–µ–ª–∏ —Ä–∞—Å–∫—Ä–æ–π—Ç–µ –¥–µ—Ä–µ–≤–æ:
   ```
   PostgreSQL
   ‚îî‚îÄ‚îÄ ai_news_db
       ‚îî‚îÄ‚îÄ Schemas
           ‚îî‚îÄ‚îÄ public
               ‚îî‚îÄ‚îÄ Tables
                   ‚îî‚îÄ‚îÄ digest_sessions  ‚Üê –∫–ª–∏–∫–Ω–∏—Ç–µ –ø—Ä–∞–≤–æ–π –∫–Ω–æ–ø–∫–æ–π
   ```

2. –í—ã–±–µ—Ä–∏—Ç–µ "View Data" ‚Üí –û—Ç–∫—Ä–æ–µ—Ç—Å—è —Ç–∞–±–ª–∏—Ü–∞ —Å –¥–∞–Ω–Ω—ã–º–∏!

3. –î–ª—è SQL-–∑–∞–ø—Ä–æ—Å–æ–≤:
   - –ù–∞–∂–º–∏—Ç–µ `Cmd + ]` –∏–ª–∏ "SQL Editor" ‚Üí "New SQL Script"
   - –ù–∞–ø–∏—à–∏—Ç–µ –∑–∞–ø—Ä–æ—Å, –Ω–∞–ø—Ä–∏–º–µ—Ä: `SELECT * FROM digest_sessions;`
   - –ù–∞–∂–º–∏—Ç–µ `Cmd + Enter` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

#### 2. **pgAdmin 4** (–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç)

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
brew install --cask pgadmin4
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç PostgreSQL
- ‚úÖ –ú–Ω–æ–≥–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π
- ‚ùå –¢—è–∂–µ–ª–æ–≤–µ—Å–Ω—ã–π
- ‚ùå –°–ª–æ–∂–Ω–µ–µ –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö

#### 3. **Postico** (—Ç–æ–ª—å–∫–æ macOS, –ø–ª–∞—Ç–Ω—ã–π)

**–£—Å—Ç–∞–Ω–æ–≤–∫–∞:**
```bash
brew install --cask postico
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –°–∞–º—ã–π –∫—Ä–∞—Å–∏–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π
- ‚ùå –ü–ª–∞—Ç–Ω—ã–π ($40 –ø–æ—Å–ª–µ trial)
- ‚ùå –¢–æ–ª—å–∫–æ –¥–ª—è macOS

---

## üéÆ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —É—Ç–∏–ª–∏—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```sql
-- 1. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
\d digest_sessions

-- 2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
SELECT * FROM digest_sessions;

-- 3. –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
SELECT COUNT(*) FROM digest_sessions;

-- 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏
SELECT * FROM digest_sessions WHERE is_active = true;
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –±–æ—Ç–∞

```sql
-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å–µ—Å—Å–∏–π
SELECT 
    id,
    chat_id,
    news_count,
    is_active,
    created_at
FROM digest_sessions 
ORDER BY created_at DESC 
LIMIT 10;

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏
SELECT COUNT(*) as –∞–∫—Ç–∏–≤–Ω—ã—Ö 
FROM digest_sessions 
WHERE is_active = true;
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –û—Ç–ª–∞–¥–∫–∞ - –Ω–∞–π—Ç–∏ "–∑–∞–≤–∏—Å—à–∏–µ" —Å–µ—Å—Å–∏–∏

```sql
-- –ù–∞–π—Ç–∏ —Å–µ—Å—Å–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –∞–∫—Ç–∏–≤–Ω—ã –±–æ–ª—å—à–µ 1 –¥–Ω—è
SELECT * FROM digest_sessions 
WHERE is_active = true 
AND created_at < NOW() - INTERVAL '1 day';
```

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –†—É—á–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)

```sql
-- –®–ê–ì 1: –°–Ω–∞—á–∞–ª–∞ –ü–û–°–ú–û–¢–†–ï–¢–¨, —á—Ç–æ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ (–ë–ï–ó —É–¥–∞–ª–µ–Ω–∏—è!)
SELECT * FROM digest_sessions 
WHERE is_active = false 
AND updated_at < NOW() - INTERVAL '7 days';

-- –®–ê–ì 2: –ï—Å–ª–∏ –≤—Å—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ - —É–¥–∞–ª–∏—Ç—å
DELETE FROM digest_sessions 
WHERE is_active = false 
AND updated_at < NOW() - INTERVAL '7 days';

-- –®–ê–ì 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
SELECT COUNT(*) FROM digest_sessions;
```

‚ö†Ô∏è **–í–ê–ñ–ù–û:** –í—Å–µ–≥–¥–∞ —Å–Ω–∞—á–∞–ª–∞ –¥–µ–ª–∞–π—Ç–µ SELECT, —á—Ç–æ–±—ã —É–≤–∏–¥–µ—Ç—å, —á—Ç–æ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–æ/—É–¥–∞–ª–µ–Ω–æ!

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–≤–æ–¥–∞

```sql
-- –í–∫–ª—é—á–∏—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥ (–∫–∞–∂–¥–æ–µ –ø–æ–ª–µ –Ω–∞ –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–µ)
\x

-- –¢–µ–ø–µ—Ä—å –∑–∞–ø—Ä–æ—Å –ø–æ–∫–∞–∂–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ:
SELECT * FROM digest_sessions WHERE id = 1;

-- –í—ã–≤–æ–¥:
-[ RECORD 1 ]---------------------------------------
id          | 1
chat_id     | -1002983482030
message_ids | [237, 238, 239, 240]
news_count  | 21
is_active   | t
created_at  | 2025-10-01 09:00:00

-- –í–µ—Ä–Ω—É—Ç—å –æ–±—ã—á–Ω—ã–π –≤—ã–≤–æ–¥:
\x
```

### –í–∫–ª—é—á–∏—Ç—å –ø–æ–∫–∞–∑ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

```sql
-- –í–∫–ª—é—á–∏—Ç—å —Ç–∞–π–º–µ—Ä
\timing

-- –¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ–∫–∞–∂–µ—Ç –≤—Ä–µ–º—è:
SELECT COUNT(*) FROM news;
-- Time: 15.234 ms
```

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ë–î

```sql
-- –†–∞–∑–º–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
SELECT pg_size_pretty(pg_database_size('ai_news_db'));

-- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤–æ –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö
SELECT 
    tablename as —Ç–∞–±–ª–∏—Ü–∞,
    n_live_tup as –∑–∞–ø–∏—Å–µ–π
FROM pg_stat_user_tables
ORDER BY n_live_tup DESC;
```

---

## üö® –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏ –∏ —Ä–µ—à–µ–Ω–∏—è

### –û—à–∏–±–∫–∞ 1: "connection refused"

```
psql: could not connect to server: Connection refused
```

**–ü—Ä–∏—á–∏–Ω–∞:** PostgreSQL –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
brew services list | grep postgres

# –ó–∞–ø—É—Å—Ç–∏—Ç—å PostgreSQL
brew services start postgresql@12
```

### –û—à–∏–±–∫–∞ 2: "password authentication failed"

```
psql: FATAL: password authentication failed for user "postgres"
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–∞—Ä–æ–ª—å –≤ —Ñ–∞–π–ª–µ `.env`:
```bash
cat .env | grep DATABASE
```

### –û—à–∏–±–∫–∞ 3: "database does not exist"

```
psql: FATAL: database "ai_news_db" does not exist
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ —Å–æ–∑–¥–∞–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –í–æ–π—Ç–∏ –≤ postgres
psql -U postgres

# –°–æ–∑–¥–∞—Ç—å –±–∞–∑—É
CREATE DATABASE ai_news_db;

# –í—ã–π—Ç–∏
\q
```

### –û—à–∏–±–∫–∞ 4: –ó–∞–±—ã–ª–∏ —Ç–æ—á–∫—É —Å –∑–∞–ø—è—Ç–æ–π

```sql
SELECT * FROM digest_sessions
ai_news_db-# 
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ó–∞–±—ã–ª–∏ `;` –≤ –∫–æ–Ω—Ü–µ

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–ø–∏—à–∏—Ç–µ `;` –∏ –Ω–∞–∂–º–∏—Ç–µ Enter:
```sql
ai_news_db-# ;
```

---

## üí° –°–æ–≤–µ—Ç—ã –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö

### 1. –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ WHERE —Å UPDATE –∏ DELETE

```sql
-- ‚ùå –ü–õ–û–•–û: —É–¥–∞–ª–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ!
DELETE FROM digest_sessions;

-- ‚úÖ –•–û–†–û–®–û: —É–¥–∞–ª–∏—Ç —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ
DELETE FROM digest_sessions WHERE id = 1;
```

### 2. –°–Ω–∞—á–∞–ª–∞ SELECT, –ø–æ—Ç–æ–º UPDATE/DELETE

```sql
-- –°–Ω–∞—á–∞–ª–∞ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, —á—Ç–æ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–æ:
SELECT * FROM digest_sessions WHERE is_active = true;

-- –ï—Å–ª–∏ –≤—Å—ë –ø—Ä–∞–≤–∏–ª—å–Ω–æ - –æ–±–Ω–æ–≤–∏—Ç–µ:
UPDATE digest_sessions SET is_active = false WHERE is_active = true;
```

### 3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ LIMIT –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ç–∞–±–ª–∏—Ü

```sql
-- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–µ—Ä–≤—ã–µ 10 –∑–∞–ø–∏—Å–µ–π:
SELECT * FROM news LIMIT 10;
```

### 4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

```sql
-- –ù–∞—á–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
BEGIN;

-- –í—ã–ø–æ–ª–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
UPDATE digest_sessions SET is_active = false WHERE id = 1;

-- –ï—Å–ª–∏ –≤—Å—ë —Ö–æ—Ä–æ—à–æ - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å:
COMMIT;

-- –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å:
ROLLBACK;
```

### 5. –î–µ–ª–∞–π—Ç–µ backup –ø–µ—Ä–µ–¥ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–º–∏

```bash
# –°–æ–∑–¥–∞—Ç—å backup
pg_dump ai_news_db > backup_$(date +%Y%m%d).sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ backup (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)
psql ai_news_db < backup_20251001.sql
```

---

## üìö –®–ø–∞—Ä–≥–∞–ª–∫–∞ –∫–æ–º–∞–Ω–¥

### –ú–µ—Ç–∞–∫–æ–º–∞–Ω–¥—ã psql

```sql
\l                          -- —Å–ø–∏—Å–æ–∫ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
\c database_name            -- –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –±–∞–∑—É
\dt                         -- —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
\d table_name               -- —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã
\du                         -- —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
\x                          -- –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω—ã–π –≤—ã–≤–æ–¥
\timing                     -- –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –≤—Ä–µ–º—è
\q                          -- –≤—ã—Ö–æ–¥
```

### SQL-–∑–∞–ø—Ä–æ—Å—ã

```sql
-- –ß–¢–ï–ù–ò–ï
SELECT * FROM table_name;
SELECT column1, column2 FROM table_name WHERE condition;
SELECT COUNT(*) FROM table_name;

-- –î–û–ë–ê–í–õ–ï–ù–ò–ï
INSERT INTO table_name (column1, column2) VALUES (value1, value2);

-- –ò–ó–ú–ï–ù–ï–ù–ò–ï
UPDATE table_name SET column1 = value1 WHERE condition;

-- –£–î–ê–õ–ï–ù–ò–ï
DELETE FROM table_name WHERE condition;

-- –°–û–†–¢–ò–†–û–í–ö–ê
ORDER BY column_name DESC;   -- –æ—Ç –±–æ–ª—å—à–µ–≥–æ –∫ –º–µ–Ω—å—à–µ–º—É
ORDER BY column_name ASC;    -- –æ—Ç –º–µ–Ω—å—à–µ–≥–æ –∫ –±–æ–ª—å—à–µ–º—É

-- –û–ì–†–ê–ù–ò–ß–ï–ù–ò–ï
LIMIT 10;                    -- —Ç–æ–ª—å–∫–æ 10 –∑–∞–ø–∏—Å–µ–π
```

---

## üéØ –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ –¥–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–∏ –∑–∞–¥–∞–Ω–∏—è –ø–æ –ø–æ—Ä—è–¥–∫—É:

### –ó–∞–¥–∞–Ω–∏–µ 1: –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
```sql
-- 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î —á–µ—Ä–µ–∑ —Ç–µ—Ä–º–∏–Ω–∞–ª
psql -h localhost -U postgres -d ai_news_db

-- 2. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
\dt

-- 3. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã digest_sessions
\d digest_sessions
```

### –ó–∞–¥–∞–Ω–∏–µ 2: –ü—Ä–æ—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã
```sql
-- 4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤—Å–µ —Å–µ—Å—Å–∏–∏
SELECT * FROM digest_sessions;

-- 5. –ü–æ–¥—Å—á–∏—Ç–∞–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ—Å—Å–∏–π
SELECT COUNT(*) FROM digest_sessions;

-- 6. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏
SELECT * FROM digest_sessions WHERE is_active = true;
```

### –ó–∞–¥–∞–Ω–∏–µ 3: –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
```sql
-- 7. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —Å–µ—Å—Å–∏–π
SELECT * FROM digest_sessions ORDER BY created_at DESC LIMIT 5;

-- 8. –ù–∞–π–¥–∏—Ç–µ —Å–µ—Å—Å–∏–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 24 —á–∞—Å–∞
SELECT * FROM digest_sessions 
WHERE created_at > NOW() - INTERVAL '24 hours';

-- 9. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
SELECT 
    is_active,
    COUNT(*) as –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
FROM digest_sessions
GROUP BY is_active;
```

---

## üéì –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –æ–±—É—á–µ–Ω–∏—é

### –®–∞–≥ 1: –û—Å–Ω–æ–≤—ã SQL (1-2 –Ω–µ–¥–µ–ª–∏)
- [SQL Tutorial –Ω–∞ W3Schools](https://www.w3schools.com/sql/) - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π –∫—É—Ä—Å —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- [PostgreSQL Tutorial](https://www.postgresqltutorial.com/) - —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è PostgreSQL

### –®–∞–≥ 2: –ü—Ä–∞–∫—Ç–∏–∫–∞ (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ)
- –í—ã–ø–æ–ª–Ω—è–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –≤–∞—à–µ–π –ë–î
- –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å —Ä–∞–∑–Ω—ã–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏ WHERE
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã ORDER BY –∏ LIMIT

### –®–∞–≥ 3: GUI-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (—Ä–µ–∫–æ–º–µ–Ω–¥—É—é –Ω–∞—á–∞—Ç—å —Å —ç—Ç–æ–≥–æ!)
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ DBeaver
- –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –ë–î
- –ò–∑—É—á–∞–π—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü –≤–∏–∑—É–∞–ª—å–Ω–æ

---

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

### –î–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤–∞–º –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –≤—Å–µ–≥–æ 3 –∫–æ–º–∞–Ω–¥—ã:

```bash
# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
psql -h localhost -U postgres -d ai_news_db

# 2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –¥–∞–π–¥–∂–µ—Å—Ç–æ–≤
SELECT * FROM digest_sessions WHERE is_active = true;

# 3. –í—ã–π—Ç–∏
\q
```

### –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ DBeaver - —ç—Ç–æ –±—É–¥–µ—Ç –ø—Ä–æ—â–µ! üöÄ

**DBeaver –ø–æ–∑–≤–æ–ª—è–µ—Ç:**
- –í–∏–¥–µ—Ç—å –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –≤–∏–∑—É–∞–ª—å–Ω–æ
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä—è–º–æ –≤ —Ç–∞–±–ª–∏—Ü–µ
- –í—ã–ø–æ–ª–Ω—è—Ç—å SQL-–∑–∞–ø—Ä–æ—Å—ã —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∑–∞–ø—Ä–æ—Å—ã

---

## üìû –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–º–æ—â—å

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –≤–æ–ø—Ä–æ—Å—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞: `tail -f bot_smoke.log`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞–Ω–Ω—ã–µ –≤ –ë–î —Å –ø–æ–º–æ—â—å—é –∑–∞–ø—Ä–æ—Å–æ–≤ –≤—ã—à–µ
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ DBeaver –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è

**–ü–æ–º–Ω–∏—Ç–µ:** –ë–æ—è—Ç—å—Å—è –ë–î –Ω–µ –Ω—É–∂–Ω–æ! –í—Å–µ –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏–∑ backup. –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∏ —É—á–∏—Ç–µ—Å—å! üí™

---

**–°–æ–∑–¥–∞–Ω–æ:** 2025-10-01  
**–î–ª—è –ø—Ä–æ–µ–∫—Ç–∞:** AI News Assistant  
**–í–µ—Ä—Å–∏—è:** 1.0 –¥–ª—è –Ω–∞—á–∏–Ω–∞—é—â–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤  
**–ê–≤—Ç–æ—Ä:** AI Assistant

